# Mahavatar Narsimha 项目概述

## 项目信息
- **项目名称**: Mahavatar Narsimha 官方电影网站
- **域名**: mahavatar-narsimha.com
- **项目代号**: MN-Portal
- **技术模板**: ShipAny Template One
- **版本**: v1.0.0

## 技术栈

### 前端技术
- **框架**: Next.js 15.2 (App Router)
- **语言**: TypeScript
- **样式**: Tailwind CSS
- **UI组件库**: shadcn/ui (基于 Radix UI)
- **国际化**: next-intl (支持英语、中文)

### 后端技术
- **API框架**: Next.js API Routes
- **数据库**: Supabase
- **缓存**: 内置缓存机制
- **认证**: NextAuth.js 5.0

### 第三方服务
- **支付**: Stripe
- **广告**: Google AdSense
- **分析**: Google Analytics 4
- **CDN**: Cloudflare
- **部署**: Vercel/Cloudflare Workers

### AI集成
- **视频生成**: Kling AI
- **图像生成**: 多个AI SDK支持
- **文本生成**: OpenAI/DeepSeek

## 架构模式

项目采用 **MVC-Service 三层架构**：

```
┌─────────────────────────────────────────────────────┐
│            表现层 (Presentation Layer)              │
│    Pages, Components, UI Elements                   │
└─────────────────────────────────────────────────────┘
                        ↕
┌─────────────────────────────────────────────────────┐
│         业务逻辑层 (Business Logic Layer)           │
│    Services, API Routes, Business Rules             │
└─────────────────────────────────────────────────────┘
                        ↕
┌─────────────────────────────────────────────────────┐
│          数据访问层 (Data Access Layer)             │
│    Models, Database Operations, Type Definitions    │
└─────────────────────────────────────────────────────┘
```

## 目录结构

### 核心目录

#### `/app` - Next.js App Router
- `(legal)` - 法律页面（隐私政策、服务条款）
- `[locale]` - 国际化路由
  - `(default)` - 公开页面
  - `(admin)` - 管理后台
  - `auth` - 认证页面
- `api` - API接口
  - `checkout` - 支付处理
  - `auth` - 认证接口
  - `stripe-notify` - Stripe webhook
  - `demo` - AI生成演示

#### `/services` - 业务服务层
- `credit.ts` - 积分管理
- `order.ts` - 订单处理  
- `user.ts` - 用户管理
- `affiliate.ts` - 推荐系统
- `apikey.ts` - API密钥管理

#### `/models` - 数据模型层
- `db.ts` - 数据库连接
- `user.ts` - 用户数据操作
- `order.ts` - 订单数据操作
- `credit.ts` - 积分数据操作
- `post.ts` - 内容管理

#### `/components` - React组件
- `/ui` - 基础UI组件
- `/blocks` - 页面区块组件
- `/console` - 控制台组件
- `/dashboard` - 管理后台组件
- `/movie` - 电影相关组件

#### `/i18n` - 国际化配置
- `/messages` - 通用翻译
- `/pages` - 页面特定翻译
- `routing.ts` - 路由配置

## 主要功能模块

### 1. 电影信息展示
- 首页Hero区域
- 电影详情页
- 角色介绍
- 视频播放器

### 2. 新闻资讯
- 新闻列表
- 新闻详情
- 相关推荐

### 3. 票房数据
- 实时票房展示
- 票房走势图
- 地区分布分析

### 4. 用户系统
- 注册/登录
- 个人中心
- 积分系统
- API密钥管理

### 5. 付费订阅
- 会员等级
- Stripe支付集成
- 订单管理

### 6. 管理后台
- 用户管理
- 内容管理
- 订单管理
- 反馈管理

## 变现策略

### 1. Google AdSense广告
- 首页横幅广告
- 文章内嵌广告
- 侧边栏广告
- 移动端自适应广告

### 2. 会员订阅
- 基础会员（免费）
- 高级会员（$4.99/月）
  - 去除广告
  - 独家内容
  - 高清下载

### 3. 联盟营销
- 电影票务平台分佣
- 流媒体平台推荐
- 周边产品销售

## 部署配置

### 环境变量
- 数据库连接
- 认证密钥
- 支付配置
- 广告ID
- AI服务密钥

### 部署选项
1. **Vercel** - 推荐，Next.js官方支持
2. **Cloudflare Workers** - 边缘部署
3. **Docker** - 自托管方案

## 开发指南

### 开发命令
```bash
pnpm dev        # 开发服务器
pnpm build      # 生产构建
pnpm lint       # 代码检查
pnpm typecheck  # 类型检查
```

### 代码规范
- 使用TypeScript严格模式
- 遵循ESLint规则
- 组件采用原子设计
- 服务层处理业务逻辑
- 模型层处理数据操作

### 注意事项
- 所有代码必须使用中文注释
- 文档统一保存在docs文件夹
- 遵循MVC-Service架构模式
- 优先编辑现有文件，避免创建新文件
- 使用shadcn/ui组件库，避免使用indigo/blue颜色

## 项目状态

### 已完成功能
- 基础页面结构
- 国际化支持
- 用户认证系统
- 支付集成
- 管理后台框架

### 待优化项
- SEO优化（Google Search Console显示多个404页面）
- 视频索引问题
- 页面重定向优化
- 内容填充完善

## 联系信息
- 项目仓库：GitHub
- 部署平台：Vercel
- 域名管理：Cloudflare